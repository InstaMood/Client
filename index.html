<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- MDB icon -->
        <link rel="icon" href="img/mdb-favicon.ico" type="image/x-icon">
        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
        <!-- Google Fonts Roboto -->
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
        <!-- Bootstrap core CSS -->
        <link rel="stylesheet" href="./bootstrap-src/css/bootstrap.min.css">
        <!-- Material Design Bootstrap -->
        <link rel="stylesheet" href="./bootstrap-src/css/mdb.min.css">
        <!-- Your custom styles (optional) -->
        <link rel="stylesheet" href="./bootstrap-src/css/style.css">
        <link rel="stylesheet" href="./bootstrap-src/css/login-form.css">
        <meta name="google-signin-client_id" content="864099691243-oci21m12hsos8751ccamad7rpt34sbg8.apps.googleusercontent.com">
    <title>InstaMood</title>
</head>
<body>
    <!--Landing Page-->

    <section id="landing-page" class="flex-grow-1">
        <div style="height: 100vh">
            <div class="flex-center flex-column">
                <img class="text-hide animated fadeIn mb-4" src="./bootstrap-src/img/logo.jpeg" alt="InstaMoodLogo">
              
              <h5 class="animated fadeIn mb-3">Thank you for using our features. We're glad you're with us.</h5>
              <p class="animated fadeIn text-muted">IM Team</p>
            </div>
          </div>

            <!--Register Page-->
            <section class="example hoverable float-right" style=" width: fit-content; margin-left: 70%; margin-right: 10%; margin-top: -40%; border-radius: 50px;">
                <!-- Default form register -->
                    <form class="text-center border border-light p-5" style="border-radius: 50px;" action="#!">

                        <p class="h4 mb-4">Register</p>

                        <!-- E-mail -->
                        <input type="email" id="defaultRegisterFormEmail" class="form-control mb-4" placeholder="E-mail">

                        <!-- Password -->
                        <input type="password" id="defaultRegisterFormPassword" class="form-control" placeholder="Password" aria-describedby="defaultRegisterFormPasswordHelpBlock">
                        <small id="defaultRegisterFormPasswordHelpBlock" class="form-text text-muted mb-4">
                            At least 8 characters and 1 digit
                        </small>

                        <!-- Sign up button -->
                        <button id="btn-reg" class="btn btn-info my-4 btn-block" type="submit">Register</button>

                        <!-- Terms of service -->
                        <p>By clicking
                            <em>Register </em> you agree to our
                            <a href="" target="_blank">terms of service</a>
                        
                        <p>Have an account? <a id="btn-login-modal" href="" class="btn btn-rounded mb-4" data-toggle="modal" data-target="#modalLoginForm"> Login </a></p>

                    </form>
                <!-- Default form register -->
            </section>

            <div id="info-message" class="animated slideInDown fixed-top">
                <!--Generated from js file depends on what the results is-->
            </div>

            <!-- Footer -->
                <footer class="page-footer font-small blue fixed-bottom example     hoverable">

                    <!-- Copyright -->
                    <div class="footer-copyright text-center py-3">Educational Purpose
                    <a> Hacktiv8 Group Project 2020 MCC Batch-03</a>
                    </div>
                    <!-- Copyright -->
                </footer>
            <!-- Footer -->

    </section>


    <!--Login Page-->
    <section class="modal fade" id="modalLoginForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
    aria-hidden="true" style="width: 20%; margin-left: 40%; height: 60%;">
        <!-- Default form login -->
            <form id='login-form-master' class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="login-form">
                            <p class="h4 mb-4">Sign in</p>
            
                            <!-- Email -->
                            <input type="email" id="defaultLoginFormEmail" class="form-control mb-4" placeholder="E-mail">
            
                            <!-- Password -->
                            <input type="password" id="defaultLoginFormPassword" class="form-control mb-4" placeholder="Password">
            
                            <div class="d-flex justify-content-around">
                                <div>
                                    <!-- Remember me -->
                                    <div class="custom-control custom-checkbox">
                                        <input type="checkbox" class="custom-control-input" id="defaultLoginFormRemember">
                                        <label class="custom-control-label" for="defaultLoginFormRemember">Remember me</label>
                                    </div>
                                </div>
                                <div>
                                    <!-- Forgot password -->
                                    <a href="">Forgot password?</a>
                                </div>
                            </div>
            
                            <!-- Sign in button -->
                            <button id="btn-login" class="btn btn-info btn-block my-4" type="submit">Sign in</button>

                            <!-- Social login -->
                            <p>or sign in with:</p>
                            <div class="g-signin2" data-onsuccess="onSignIn"></div>

                            <a href="#" class="mx-2" role="button"><i class="fab fa-google light-blue-text"></i></a>
            
                        </form>
                        <!-- Default form login -->
                    </div>
                </div>
    </section>

    
    <!--User's Dashboard / user's wall-->
    <section id="user-wall" class="" style="margin-top: 5%;">

        <!--TOP NAVBAR-->
        <!--Navbar -->
            <nav class="mb-1 navbar navbar-expand-lg navbar-dark info-color fixed-top">
                <a class="navbar-brand" href="#" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;">INSTAMood</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent-4"
                aria-controls="navbarSupportedContent-4" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent-4">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink-4" data-toggle="dropdown"
                        aria-haspopup="true" aria-expanded="false">
                        <i class="fas fa-user"></i> Profile </a>
                    <div class="dropdown-menu dropdown-menu-right dropdown-info" aria-labelledby="navbarDropdownMenuLink-4">
                        <a class="dropdown-item" href="#">My account</a>
                        <a id="btn-logout" class="dropdown-item" href="#">Log out</a>
                    </div>
                    </li>
                </ul>
                </div>
            </nav>
      <!--/.Navbar -->
        <div class="row" style="top: 0px;">
            <div id="container-posts" class="col-12 col-md-8">
                <div class="row mb-5">
                    <div class="card mx-auto hoverable" style="width: 40rem;">
                        <h3 class="card-title">Username</h3>
                        <img class="card-img" src="...">
                        <div class="card-body">
                            <h5 class="card-title"> Description</h5>
                            <p class="card-text">lorem ipsum dolon si amet</p>
                        </div>
                        <button type="button" class="btn btn-link">button</button>
                    </div>
                </div>
                <div class="row mb-5">
                    <div class="card mx-auto hoverable" style="width: 40rem;">
                        <h3 class="card-title">Username</h3>
                        <img class="card-img" src="...">
                        <div class="card-body">
                            <h5 class="card-title"> Description</h5>
                            <p class="card-text">lorem ipsum dolon si amet</p>
                        </div>
                        <button type="button" class="btn btn-link">button</button>
                    </div>
                </div>
                <div class="row mb-5">
                    <div class="card mx-auto hoverable" style="width: 40rem;">
                        <h3 class="card-title">Username</h3>
                        <img class="card-img" src="...">
                        <div class="card-body">
                            <h5 class="card-title"> Description</h5>
                            <p class="card-text">lorem ipsum dolon si amet</p>
                        </div>
                        <button type="button" class="btn btn-link">button</button>
                    </div>
                </div>
                <div class="row mb-5" id="upload-form">
                    <div class="card mx-auto"  style="width: 40rem;">
                        <form method="POST" action="/test" enctype="multipart/form-data">
                            <input type="file" name="upload" /><br /><br />
                            <button type="submit" name="upload">Upload</button>
                        </form>
                    </div>
                </div>
            </div>
            
            <div id="sidebar" class="col-6 col-md-4 fixed-right" style="position:fixed; right: 0;">
                
                <div class="card" style="width: 18rem; margin:auto;">
                    <h3 class="card-title">Profile</h3>
                    <img class="card-img" src="...">
                    <div class="card-body">
                        <h5 class="card-title"> Name</h5>
                        <p class="card-text">lorem ipsum dolon si amet</p>
                    </div>
                    <button type="button" class="btn btn-link">Upload My Photos</button>
                    <button type="button" class="btn btn-link">Show My Photos</button>
                    <button type="button" class="btn btn-link">Discover</button>
                </div>
            </div>
        </div>

    </section>



    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="main.js"></script>

    <script>
        function onSignIn(googleUser) {
            var profile = googleUser.getBasicProfile();
            const g_idToken = googleUser.getAuthResponse().id_token;

            console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
            console.log('Name: ' + profile.getName());
            console.log('Image URL: ' + profile.getImageUrl());
            console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.
            console.log('Access Token: ' + g_idToken);
            $.ajax({
                    method: 'GET',
                    url: 'http://localhost:3000/loginGoogle',
                    headers: {
                        'token': g_idToken
                    }
                })
                .done(function(response){
                    localStorage.setItem('access_token', response.access_token)

                    $('#user-wall').show()
                    $('#landing-page').hide()
                    $('#modalLoginForm').modal('hide')
                })
                .fail(function(error){
                    console.log(error);
                    
                })    
                
        }
        
    </script>



    <!-- jQuery -->
    <script type="text/javascript" src="./bootstrap-src/js/jquery.min.js"></script>
    <!-- Bootstrap tooltips -->
    <script type="text/javascript" src="./bootstrap-src/js/popper.min.js"></script>
    <!-- Bootstrap core JavaScript -->
    <script type="text/javascript" src="./bootstrap-src/js/bootstrap.min.js"></script>
    <!-- MDB core JavaScript -->
    <script type="text/javascript" src="./bootstrap-src/js/mdb.min.js"></script>

</body>
</html>